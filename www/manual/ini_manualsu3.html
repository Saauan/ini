<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Counting occurences in a list</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,frames,3,info --> 
<meta name="src" content="ini_manual.tex"> 
<meta name="date" content="2010-09-12 12:23:00"> 
<link rel="stylesheet" type="text/css" href="ini_manual.css"> 
</head><body 
>
   <!--l. 142--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu4.html" >next</a>] [<a 
href="#tailini_manualsu3.html">tail</a>] [<a 
href="ini_manualse3.html#ini_manualsu3.html" >up</a>] </p></div>
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x10-70003.1"></a>Counting occurences in a list</h4>
<!--l. 144--><p class="noindent" >In order to illustrate the use of maps and lists with INI, we now show
how to implement a simple function that counts the occurences of the
elements within a given list. In order to access the counted results for each
element, we store them in a map, where each entry&#8217;s key is the counted
element, and the entry&#8217;s value is the calculated number of occurences of the
element.
<!--l. 146--><p class="indent" >   For implementing this function, we will use INI built-in map types, which
allow the programmer to associate keys with values by using a square bracket
based syntax (like arrays in most languages). Within an INI map, all the keys
and values must be of the same type in order to avoid typing errors. In
INI, a list is a <span 
class="cmtt-10x-x-109">Map(Int,T)</span>, which can also be said as <span 
class="cmtt-10x-x-109">T* </span>(list of <span 
class="cmtt-10x-x-109">T</span>). A
type alias is defined for strings, which are lists of characters: <span 
class="cmtt-10x-x-109">String</span> <img 
src="ini_manual0x.png" alt="^="  class="widehat" >
<span 
class="cmtt-10x-x-109">Map(Int,Char)</span>.
<!--l. 148--><p class="indent" >   INI provides <span 
class="cmti-10x-x-109">type inference </span>[...], so that the programmer does not need to
declare any type (except in some cases as we will see later). For instance,
the <span 
class="cmtt-10x-x-109">i=0 </span>statement will define the <span 
class="cmtt-10x-x-109">i </span>variable with an <span 
class="cmtt-10x-x-109">Int </span>type. If the
programmer tries to set the type of <span 
class="cmtt-10x-x-109">i </span>to any other type within the <span 
class="cmtt-10x-x-109">i</span>
definition scope, (for instance with the <span 
class="cmtt-10x-x-109">i=0.0 </span>statement that assigns i with
a <span 
class="cmtt-10x-x-109">Float </span>type) the INI type checker will raise a type mismatch error.
                                                                     

                                                                     
Following the same type inference principles, accessing a variable with
the square brackets map access construct will automatically define the
type of the variable to be a map. For instance, the <span 
class="cmtt-10x-x-109">l[i] </span>expression tells
INI that <span 
class="cmtt-10x-x-109">l </span>is of type <span 
class="cmtt-10x-x-109">Map(Int,T) </span>(i.e. a list of <span 
class="cmtt-10x-x-109">T</span>), where <span 
class="cmtt-10x-x-109">T </span>can be any
type.
   <!--l. 150-->
   <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x10-7001r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;countOccurencesAndStoreToMap(l)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7002r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;@init()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7003r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;i=0&#x00A0;<br /><span class="label"><a 
 id="x10-7004r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7005r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;i&#x00A0;<span 
class="cmmi-10x-x-109">&#x003C;</span>&#x00A0;size(l)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7006r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;c[l[i++]]++&#x00A0;<br /><span class="label"><a 
 id="x10-7007r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7008r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;@end()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7009r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;c&#x00A0;<br /><span class="label"><a 
 id="x10-7010r10"></a><span 
class="cmr-9">10</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7011r11"></a><span 
class="cmr-9">11</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 164--><p class="indent" >   The <span 
class="cmtt-10x-x-109">countOccurencesAndStoreToMap </span>function shown here simply iterates
through the given <span 
class="cmtt-10x-x-109">l </span>variable. As expected, this variable is inferred by INI to be a
list, since it is used as such in the expressions <span 
class="cmtt-10x-x-109">l[i++] </span>(line 6) and <span 
class="cmtt-10x-x-109">size(l) </span>(line
5). So, for each element in <span 
class="cmtt-10x-x-109">l</span>, the function accesses the corresponding entry in a <span 
class="cmtt-10x-x-109">c</span>
map: c[l[i]] and increments the value of this entry with the <span 
class="cmtt-10x-x-109">++ </span>operator
(<span 
class="cmtt-10x-x-109">c[l[i]]++</span>). Then, the program goes to the next element of the list with the <span 
class="cmtt-10x-x-109">++</span>
operator on <span 
class="cmtt-10x-x-109">i </span>(hence the weird yet concise statement <span 
class="cmtt-10x-x-109">c[l[i++]]++ </span>of line 6). The
<span 
class="cmtt-10x-x-109">++ </span>operator is a typical post increment operator as it is found in C or Java
languages.
<!--l. 166--><p class="indent" >   As shown in the following program, we can now use this function to count the
occurences within a list of integers. Note that a program shall define a main
function that is run by the INI interpreter.
   <!--l. 168-->
   <div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x10-7012r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;main()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7013r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;@init()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7014r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;l&#x00A0;=&#x00A0;[1,&#x00A0;2,&#x00A0;1,&#x00A0;7]&#x00A0;<br /><span class="label"><a 
 id="x10-7015r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Counting&#x00A0;&#8217;&#8221;+l+&#8221;&#8217;&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x10-7016r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;c&#x00A0;=&#x00A0;countOccurencesAndStoreToMap(l)&#x00A0;<br /><span class="label"><a 
 id="x10-7017r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;1:&#x00A0;&#8221;+c[1])&#x00A0;<br /><span class="label"><a 
 id="x10-7018r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;7:&#x00A0;&#8221;+c[7])&#x00A0;<br /><span class="label"><a 
 id="x10-7019r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;3:&#x00A0;&#8221;+c[3])&#x00A0;<br /><span class="label"><a 
 id="x10-7020r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7021r10"></a><span 
class="cmr-9">10</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 181--><p class="indent" >   Output:
   <!--l. 183-->
   <div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x10-7022r1"></a></span>Counting&#x00A0;&#8217;[1,2,1,7](0..3)&#8217;&#x00A0;<br /><span class="label"><a 
 id="x10-7023r2"></a></span>Number&#x00A0;of&#x00A0;1:&#x00A0;2&#x00A0;<br /><span class="label"><a 
 id="x10-7024r3"></a></span>Number&#x00A0;of&#x00A0;7:&#x00A0;1&#x00A0;<br /><span class="label"><a 
 id="x10-7025r4"></a></span>Number&#x00A0;of&#x00A0;3:&#x00A0;null
   
   </div>
<!--l. 190--><p class="indent" >   When executing the main function, the <span 
class="cmtt-10x-x-109">c </span>variable is filled with the count of
each element in the list <span 
class="cmtt-10x-x-109">l</span>. Note that in that case, the type of <span 
class="cmtt-10x-x-109">c </span>is <span 
class="cmtt-10x-x-109">Map(Int,Int)</span>,
because <span 
class="cmtt-10x-x-109">l </span>is of type <span 
class="cmtt-10x-x-109">Int*</span>. However, we can note that nothing prevents the
program to count other types of elements. For instance, we can count a list of
strings: <span 
class="cmtt-10x-x-109">l = ["a","ab","abc","ab","a"]</span>. In that case, the type of <span 
class="cmtt-10x-x-109">c</span>
would be <span 
class="cmtt-10x-x-109">Map(String,Int)</span>. Finally, since strings are defined as lists of
characters in INI, we can also count letter occurences in a string, as showed
below.
                                                                     

                                                                     
   <!--l. 192-->
   <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x10-7026r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;main()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7027r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;@init()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7028r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;s&#x00A0;=&#x00A0;&#8221;This&#x00A0;is&#x00A0;the&#x00A0;string&#x00A0;we&#x00A0;will&#x00A0;count&#8221;&#x00A0;<br /><span class="label"><a 
 id="x10-7029r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Counting&#x00A0;&#8217;&#8221;+s+&#8221;&#8217;&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x10-7030r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;c&#x00A0;=&#x00A0;countOccurencesAndStoreToMap(s)&#x00A0;<br /><span class="label"><a 
 id="x10-7031r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;e(s):&#x00A0;&#8221;+c[&#8217;e&#8217;])&#x00A0;<br /><span class="label"><a 
 id="x10-7032r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;a(s):&#x00A0;&#8221;+c[&#8217;a&#8217;])&#x00A0;<br /><span class="label"><a 
 id="x10-7033r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;s(s):&#x00A0;&#8221;+c[&#8217;s&#8217;])&#x00A0;<br /><span class="label"><a 
 id="x10-7034r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;i(s):&#x00A0;&#8221;+c[&#8217;i&#8217;])&#x00A0;<br /><span class="label"><a 
 id="x10-7035r10"></a><span 
class="cmr-9">10</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Number&#x00A0;of&#x00A0;spaces:&#x00A0;&#8221;+c[&#8217;&#x00A0;&#8217;])&#x00A0;<br /><span class="label"><a 
 id="x10-7036r11"></a><span 
class="cmr-9">11</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x10-7037r12"></a><span 
class="cmr-9">12</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 207--><p class="indent" >   Output:
   <!--l. 209-->
   <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x10-7038r1"></a></span>Counting&#x00A0;&#8217;This&#x00A0;is&#x00A0;the&#x00A0;string&#x00A0;we&#x00A0;will&#x00A0;count&#8217;&#x00A0;<br /><span class="label"><a 
 id="x10-7039r2"></a></span>Number&#x00A0;of&#x00A0;e(s):&#x00A0;2&#x00A0;<br /><span class="label"><a 
 id="x10-7040r3"></a></span>Number&#x00A0;of&#x00A0;a(s):&#x00A0;null&#x00A0;<br /><span class="label"><a 
 id="x10-7041r4"></a></span>Number&#x00A0;of&#x00A0;s(s):&#x00A0;3&#x00A0;<br /><span class="label"><a 
 id="x10-7042r5"></a></span>Number&#x00A0;of&#x00A0;i(s):&#x00A0;4&#x00A0;<br /><span class="label"><a 
 id="x10-7043r6"></a></span>Number&#x00A0;of&#x00A0;spaces:&#x00A0;6
   
   </div>
<!--l. 218--><p class="indent" >   In terms of typing, it means that the <span 
class="cmtt-10x-x-109">countOccurencesAndStoreToMap</span>
function is <span 
class="cmti-10x-x-109">polymorphic</span>. A polymorphic function is more generic since it can be
applied to several types. More precisely, in our case, the inferred functional type
is <span 
class="cmtt-10x-x-109">(Map(&#8217;E,Int))-&#x003E;Void</span>, where <span 
class="cmtt-10x-x-109">&#8217;E </span>is a type parameter. Actually, the INI type
inference algorithm finds the most general type so that functions are only typed
with the least possible constraints and remain polymorphic when possible. For
more details, see [...].
                                                                     

                                                                     
   <!--l. 220--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu4.html" >next</a>] [<a 
href="ini_manualsu3.html" >front</a>] [<a 
href="ini_manualse3.html#ini_manualsu3.html" >up</a>] </p></div>
<!--l. 220--><p class="indent" >   <a 
 id="tailini_manualsu3.html"></a>  
</body></html> 
