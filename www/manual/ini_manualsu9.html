<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Rules</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,frames,3,info --> 
<meta name="src" content="ini_manual.tex"> 
<meta name="date" content="2010-09-12 12:23:00"> 
<link rel="stylesheet" type="text/css" href="ini_manual.css"> 
</head><body 
>
   <!--l. 774--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu10.html" >next</a>] [<a 
href="ini_manualsu8.html" >prev</a>] [<a 
href="ini_manualsu8.html#tailini_manualsu8.html" >prev-tail</a>] [<a 
href="#tailini_manualsu9.html">tail</a>] [<a 
href="ini_manualse4.html#ini_manualsu9.html" >up</a>] </p></div>
   <h4 class="subsectionHead"><span class="titlemark">4.3   </span> <a 
 id="x17-210004.3"></a>Rules</h4>
<!--l. 776--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.1   </span> <a 
 id="x17-220004.3.1"></a>Syntax</h5>
<!--l. 778--><p class="noindent" >Each rule has the following syntax:
                                                                     

                                                                     
   <div class="verbatim" id="verbatim-9">
&#x003C;rule&#x003E;&#x00A0;:=&#x00A0;&#x003C;guard&#x003E;&#x00A0;{&#x00A0;&#x003C;body&#x003E;&#x00A0;}
&#x00A0;<br />&#x003C;body&#x003E;&#x00A0;:=&#x00A0;&#x003C;statements&#x003E;&#x00A0;&#x003C;return_statement_opt&#x003E;
&#x00A0;<br />&#x003C;guard&#x003E;&#x00A0;:=&#x00A0;&#x003C;event_matcher&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;&#x003C;logical_expr&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;|&#x00A0;&#x003C;event_matcher&#x003E;&#x00A0;&#x003C;logical_expr&#x003E;
</div>
<!--l. 786--><p class="nopar" >
<!--l. 788--><p class="indent" >   The guard is either a event matcher (for event-triggered rules) or a logical
expression, or both. Events will be depicted in the next section, and we will now
focus on the logical expression part of the rule.
<!--l. 790--><p class="indent" >   A logical expression within a guard is formed of variable accesses, function
invocations, and literals, composed together with logical operators and/or
comparison operators.
<!--l. 792--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.2   </span> <a 
 id="x17-230004.3.2"></a>Logical operators</h5>
<!--l. 794--><p class="noindent" >Allowed logical operators within a guard are:
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; &amp;&amp; &#x003C;expr&#x003E;</span>: logical and, that applies to two boolean logical
     expressions. Like many languages, when the left-hand-side expression
     evaluated to false, the right-hand one is not evaluated.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; || &#x003C;expr&#x003E;</span>:  logical  or,  that  applies  to  two  boolean  logical
     expressions,  and  that  return  true  without  evaluating  the  right
     expression if the left one evaluates to true.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">! &#x003C;expr&#x003E;</span>: the not operator has two meanings depending on the type
     of  the  given  expression.  When  <span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; </span>is  boolean,  it  is  the  logical
     inversion operator. In all other cases, the not operator will test the
     existence of a resulting value when evaluating the expression. To use
     a Java analogy, it would be similar to <span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; == null</span>. Conversely,
     <span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; </span>in INI will equal to <span 
class="cmtt-10x-x-109">!!&#x003C;expr&#x003E; </span>or, in Java, to <span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; != null</span>.
     Note that if  <span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; </span>is an access to an undefined variable, then the
     resulting value will be <span 
class="cmtt-10x-x-109">null </span>as well.</li></ul>
                                                                     

                                                                     
<!--l. 802--><p class="indent" >   To illustrate the use of the not operator on non-boolean expression, let us
take the following function:
   <!--l. 804-->
   <div class="lstlisting" id="listing-30"><span class="label"><a 
 id="x17-23001r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;ping_pong()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23002r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;!v&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23003r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;ping&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x17-23004r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;v=&#8221;&#8221;&#x00A0;<br /><span class="label"><a 
 id="x17-23005r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23006r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;v&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23007r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;pong&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x17-23008r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;clear(v)&#x00A0;<br /><span class="label"><a 
 id="x17-23009r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23010r10"></a><span 
class="cmr-9">10</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 817--><p class="indent" >   This function triggers an infinite loop (it is actually a ping-pong effect
between the two rules). When entering <span 
class="cmtt-10x-x-109">ping</span><span 
class="cmtt-10x-x-109">_pong</span>, the <span 
class="cmtt-10x-x-109">v </span>variable is always
undefined since it is not a parameter of the function. Thus, the guard <span 
class="cmtt-10x-x-109">!v </span>at line 2
evaluates to <span 
class="cmtt-10x-x-109">true</span>, while the guard <span 
class="cmtt-10x-x-109">v </span>at line 6 evaluates to <span 
class="cmtt-10x-x-109">false</span>. So,
INI evaluates the first rule and sets <span 
class="cmtt-10x-x-109">v </span>to an empty string. Since <span 
class="cmtt-10x-x-109">v </span>is not
undefined anymore, the first rule cannot apply and the second one applies,
leading to clearing the content of <span 
class="cmtt-10x-x-109">v </span>at line 8. Then, the first rule can apply
again, starting the endless ping-pong game over again. Note that the rules
order is not important. The following program gives exactly the same
result:
   <!--l. 819-->
   <div class="lstlisting" id="listing-31"><span class="label"><a 
 id="x17-23011r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;ping_pong()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23012r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;v&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23013r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;pong&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x17-23014r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;clear(v)&#x00A0;<br /><span class="label"><a 
 id="x17-23015r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23016r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;!v&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23017r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;ping&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x17-23018r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;v=&#8221;&#8221;&#x00A0;<br /><span class="label"><a 
 id="x17-23019r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-23020r10"></a><span 
class="cmr-9">10</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 832--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.3   </span> <a 
 id="x17-240004.3.3"></a>Comparison operators</h5>
<!--l. 834--><p class="noindent" >Comparison operators are binary operators that apply to objects. In INI, using a
comparison operator between two object implies that they are of the same type.
If not, a typing error will occur.
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; == &#x003C;expr&#x003E;</span>: compares two objets and returns true if equal in
     terms of values.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; != &#x003C;expr&#x003E;</span>: compares two objets and returns false if equal in
     terms of values.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; &#x003E; &#x003C;expr&#x003E;</span>:  used  mainly  to  compare  two  numbers,  but  can
     actual apply to any comparable objets.
                                                                     

                                                                     
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; &#x003E;= &#x003C;expr&#x003E;</span>: used mainly to compare two numbers, but can
     actual apply to any comparable objets.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; &#x003C; &#x003C;expr&#x003E;</span>:  used  mainly  to  compare  two  numbers,  but  can
     actual apply to any comparable objets.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">&#x003C;expr&#x003E; &#x003C;= &#x003C;expr&#x003E;</span>: used mainly to compare two numbers, but can
     actual apply to any comparable objets.</li></ul>
<!--l. 845--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.4   </span> <a 
 id="x17-250004.3.4"></a>Regular expression match operator</h5>
<!--l. 847--><p class="noindent" >In order to match strings in a concise way, INI provides a match operator <span 
class="cmsy-10x-x-109">~</span>, with
can match a string against a regular expression <span class="cite">[<a 
href="ini_manualli2.html#Xfriedl2006">2</a>]</span> and bind matching groups (if
any) to INI variables. For example:
<!--l. 849--><p class="indent" >   <span 
class="cmtt-10x-x-109">"a b c" </span><span 
class="cmsy-10x-x-109">~ </span><span 
class="cmtt-10x-x-109">regexp("(.) (b) (.)",v1,v2,v3) </span>will match and be evaluated
to <span 
class="cmtt-10x-x-109">true</span>. Since there are three groups (between parenthesis), the three match
sub-results will be bound to the given variables <span 
class="cmtt-10x-x-109">v1</span>, <span 
class="cmtt-10x-x-109">v2</span>, and <span 
class="cmtt-10x-x-109">v3</span>. Thus, once
the match is done, we will have <span 
class="cmtt-10x-x-109">v1="a"</span>, <span 
class="cmtt-10x-x-109">v2="b"</span>, and <span 
class="cmtt-10x-x-109">v3="c"</span>. For more
information on regular expressions as used in INI, read the Javadoc for the
<span 
class="cmtt-10x-x-109">java.regexp.Pattern </span>class and refer to <span class="cite">[<a 
href="ini_manualli2.html#Xfriedl2006">2</a>]</span>.
<!--l. 851--><p class="indent" >   Example:
   <!--l. 853-->
   <div class="lstlisting" id="listing-32"><span class="label"><a 
 id="x17-25001r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;greetings(sentence)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-25002r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;sentence&#x00A0;&#x02DC;&#x00A0;regexp(&#8221;Hello&#x00A0;(.<span 
class="cmsy-10x-x-109">*</span>)&#8221;,name)&#x00A0;<br /><span class="label"><a 
 id="x17-25003r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">||</span>&#x00A0;sentence&#x00A0;&#x02DC;&#x00A0;regexp(&#8221;Hi&#x00A0;(.<span 
class="cmsy-10x-x-109">*</span>)&#8221;,name)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-25004r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Hello&#x00A0;to&#x00A0;&#8221;+name)&#x00A0;<br /><span class="label"><a 
 id="x17-25005r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;<br /><span class="label"><a 
 id="x17-25006r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-25007r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;sentence&#x00A0;&#x02DC;&#x00A0;regexp(&#8221;Bye&#x00A0;(.<span 
class="cmsy-10x-x-109">*</span>)&#8221;,name)&#x00A0;<br /><span class="label"><a 
 id="x17-25008r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">||</span>&#x00A0;sentence&#x00A0;&#x02DC;&#x00A0;regexp(&#8221;See&#x00A0;you&#x00A0;(.<span 
class="cmsy-10x-x-109">*</span>)&#8221;,name)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x17-25009r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;Bye&#x00A0;to&#x00A0;&#8221;+name)&#x00A0;<br /><span class="label"><a 
 id="x17-25010r10"></a><span 
class="cmr-9">10</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;<br /><span class="label"><a 
 id="x17-25011r11"></a><span 
class="cmr-9">11</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x17-25012r12"></a><span 
class="cmr-9">12</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 868--><p class="indent" >   This function matches the given sentence to determine who it is said hello or
bye to. Typically, the invocation <span 
class="cmtt-10x-x-109">greetings("See you Renaud") </span>will print out
<span 
class="cmtt-10x-x-109">"Bye to Renaud"</span>. Note the use of the return statement at lines 5 and 10 to
ensure that rules are applied once at best.
                                                                     

                                                                     
   <!--l. 870--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu10.html" >next</a>] [<a 
href="ini_manualsu8.html" >prev</a>] [<a 
href="ini_manualsu8.html#tailini_manualsu8.html" >prev-tail</a>] [<a 
href="ini_manualsu9.html" >front</a>] [<a 
href="ini_manualse4.html#ini_manualsu9.html" >up</a>] </p></div>
<!--l. 870--><p class="indent" >   <a 
 id="tailini_manualsu9.html"></a>   
</body></html> 
