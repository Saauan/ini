<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Event-triggered rules</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,frames,3,info --> 
<meta name="src" content="ini_manual.tex"> 
<meta name="date" content="2010-09-12 12:23:00"> 
<link rel="stylesheet" type="text/css" href="ini_manual.css"> 
</head><body 
>
   <!--l. 870--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu11.html" >next</a>] [<a 
href="ini_manualsu9.html" >prev</a>] [<a 
href="ini_manualsu9.html#tailini_manualsu9.html" >prev-tail</a>] [<a 
href="#tailini_manualsu10.html">tail</a>] [<a 
href="ini_manualse4.html#ini_manualsu10.html" >up</a>] </p></div>
   <h4 class="subsectionHead"><span class="titlemark">4.4   </span> <a 
 id="x18-260004.4"></a>Event-triggered rules</h4>
<!--l. 872--><p class="noindent" >Besides rules that are applied because the logical expression of the guard
evaluates to true, some rules can also be event-triggered. In that case, the guard
starts with one event match expression, of the form <span 
class="cmtt-10x-x-109">@&#x003C;event&#x003E;(&#x003C;params&#x003E;)</span>. On
contrary to regular rules, event-trigered rules are asynchronously applies, and can
occur in parallel (multithreaded evaluation).
<!--l. 874--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.1   </span> <a 
 id="x18-270004.4.1"></a><span 
class="cmtt-10x-x-109">@init </span>event</h5>
<!--l. 876--><p class="noindent" >As the name says, <span 
class="cmtt-10x-x-109">@init</span>-trigger rules are invoked when the function starts
evaluating. It is the right place to initialize the variables that may need to be
used within the other rules. This event takes no parameters.
<!--l. 878--><p class="indent" >   For example, to repeat a rule n times:
   <!--l. 880-->
   <div class="lstlisting" id="listing-33"><span class="label"><a 
 id="x18-27001r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;f(n)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27002r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;@init()&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27003r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;i=0&#x00A0;<br /><span class="label"><a 
 id="x18-27004r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27005r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;i&#x00A0;<span 
class="cmmi-10x-x-109">&#x003C;</span>&#x00A0;n&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27006r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;repeated&#x00A0;code&#x00A0;here&#x00A0;<br /><span class="label"><a 
 id="x18-27007r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;...&#x00A0;<br /><span class="label"><a 
 id="x18-27008r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;i++&#x00A0;<br /><span class="label"><a 
 id="x18-27009r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27010r10"></a><span 
class="cmr-9">10</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 893--><p class="indent" >   Note that event-based rules can also have a predicate for triggering the rule
or not. For instance, if <span 
class="cmtt-10x-x-109">n &#x003C;= 0</span>, one may want to stop the function evaluation and
print out a message:
   <!--l. 895-->
   <div class="lstlisting" id="listing-34"><span class="label"><a 
 id="x18-27011r1"></a><span 
class="cmr-9">1</span></span>function&#x00A0;f(n)&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27012r2"></a><span 
class="cmr-9">2</span></span>&#x00A0;&#x00A0;@init()&#x00A0;n<span 
class="cmmi-10x-x-109">&#x003C;</span>=0&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27013r3"></a><span 
class="cmr-9">3</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;println(&#8221;wrong&#x00A0;repeat&#x00A0;value&#8221;)&#x00A0;<br /><span class="label"><a 
 id="x18-27014r4"></a><span 
class="cmr-9">4</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;<br /><span class="label"><a 
 id="x18-27015r5"></a><span 
class="cmr-9">5</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27016r6"></a><span 
class="cmr-9">6</span></span>&#x00A0;&#x00A0;@init()&#x00A0;n<span 
class="cmmi-10x-x-109">&#x003E;</span>0&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27017r7"></a><span 
class="cmr-9">7</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;i=0&#x00A0;<br /><span class="label"><a 
 id="x18-27018r8"></a><span 
class="cmr-9">8</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27019r9"></a><span 
class="cmr-9">9</span></span>&#x00A0;&#x00A0;i&#x00A0;<span 
class="cmmi-10x-x-109">&#x003C;</span>&#x00A0;n&#x00A0;<span 
class="cmsy-10x-x-109">{</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27020r10"></a><span 
class="cmr-9">10</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;repeated&#x00A0;code&#x00A0;here&#x00A0;<br /><span class="label"><a 
 id="x18-27021r11"></a><span 
class="cmr-9">11</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;...&#x00A0;<br /><span class="label"><a 
 id="x18-27022r12"></a><span 
class="cmr-9">12</span></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;i++&#x00A0;<br /><span class="label"><a 
 id="x18-27023r13"></a><span 
class="cmr-9">13</span></span>&#x00A0;&#x00A0;<span 
class="cmsy-10x-x-109">}</span>&#x00A0;<br /><span class="label"><a 
 id="x18-27024r14"></a><span 
class="cmr-9">14</span></span><span 
class="cmsy-10x-x-109">}</span>
   
   </div>
<!--l. 912--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.2   </span> <a 
 id="x18-280004.4.2"></a><span 
class="cmtt-10x-x-109">@end </span>event</h5>
<!--l. 914--><p class="noindent" >On the contrary to the <span 
class="cmtt-10x-x-109">@init </span>event, <span 
class="cmtt-10x-x-109">@end </span>is triggered when no more rule apply,
and when the function is about to return (not including explicit return
statements, which do no trigger the <span 
class="cmtt-10x-x-109">@end </span>event). Note that any state
                                                                     

                                                                     
change in an <span 
class="cmtt-10x-x-109">@end</span>-triggered rule body will never lead to any other rule
re-evaluation, even if the state change makes an existing rule applicable
again.
<!--l. 916--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.3   </span> <a 
 id="x18-290004.4.3"></a><span 
class="cmtt-10x-x-109">@update </span>event</h5>
<!--l. 918--><p class="noindent" >The <span 
class="cmtt-10x-x-109">@update(&#x003C;variables&#x003E;) </span>event occurs when one of the given variables is
modified by the program (i.e. by one of the evaluated rules). For instance,
<span 
class="cmtt-10x-x-109">@update(a,b,c) </span>is triggered if one of the <span 
class="cmtt-10x-x-109">a</span>, <span 
class="cmtt-10x-x-109">b</span>, or <span 
class="cmtt-10x-x-109">c </span>contents are modified.
<!--l. 920--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.4   </span> <a 
 id="x18-300004.4.4"></a><span 
class="cmtt-10x-x-109">@every </span>event</h5>
<!--l. 922--><p class="noindent" >The <span 
class="cmtt-10x-x-109">@every(interval:Int) </span>event occurs every <span 
class="cmtt-10x-x-109">interval </span>milliseconds.
<!--l. 924--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.5   </span> <a 
 id="x18-310004.4.5"></a><span 
class="cmtt-10x-x-109">@cron </span>event</h5>
<!--l. 926--><p class="noindent" >The <span 
class="cmtt-10x-x-109">@cron(pattern:String) </span>event occurs on times indicated by the <span 
class="cmtt-10x-x-109">pattern</span>
UNIX CRON pattern expression. CRON is a task scheduler that allows the
concise definition of repetitive task within a single (and simple) CRON pattern
<span class="cite">[<a 
href="ini_manualli2.html#Xfranta1977">1</a>]</span>. A UNIX crontab-like pattern is a string split in five space separated parts.
Each part is intended as:
<!--l. 928--><p class="indent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x18-31002x1">Minutes  sub-pattern.  During  which  minutes  of  the  hour  the  event
     should occur? The values range is from 0 to 59.
     </li>
     <li 
  class="enumerate" id="x18-31004x2">Hours sub-pattern. During which hours of the day should the event
     occur? The values range is from 0 to 23.
     </li>
     <li 
  class="enumerate" id="x18-31006x3">Days of month sub-pattern. During which days of the month should
     the event occur? The values range is from 1 to 31. The special value
     &#8221;L&#8221; can be used to recognize the last day of month.
                                                                     

                                                                     
     </li>
     <li 
  class="enumerate" id="x18-31008x4">Months  sub-pattern.  During  which  months  of  the  year  should  the
     event occur? The values range is from 1 (January) to 12 (December),
     otherwise  this  sub-pattern  allows  the  aliases  &#8221;jan&#8221;,  &#8221;feb&#8221;,  &#8221;mar&#8221;,
     &#8221;apr&#8221;, &#8221;may&#8221;, &#8221;jun&#8221;, &#8221;jul&#8221;, &#8221;aug&#8221;, &#8221;sep&#8221;, &#8221;oct&#8221;, &#8221;nov&#8221; and &#8221;dec&#8221;.
     </li>
     <li 
  class="enumerate" id="x18-31010x5">Days of week sub-pattern. During which days of the week should the
     event occur? The values range is from 0 (Sunday) to 6 (Saturday),
     otherwise  this  sub-pattern  allows  the  aliases  &#8221;sun&#8221;,  &#8221;mon&#8221;,  &#8221;tue&#8221;,
     &#8221;wed&#8221;, &#8221;thu&#8221;, &#8221;fri&#8221; and &#8221;sat&#8221;.</li></ol>
<!--l. 936--><p class="indent" >   Some examples:
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-10x-x-109">"5 * * * *"</span>: This pattern causes the event to occur once every hour,
     at the begin of the fifth minute (00:05, 01:05, 02:05 etc.).
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">"* * * * *"</span>: This pattern causes the event to occur every minute.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">"* 12 * * Mon"</span>: This pattern causes the event to occur every minute
     during the 12th hour of Monday.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">"* 12 16 * Mon"</span>: This pattern causes the event to occur every minute
     during the 12th hour of Monday, 16th, but only if the day is the 16th
     of the month.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">"59 11 * * 1,2,3,4,5"</span>: This pattern causes the event to occur at
     11:59AM on Monday, Tuesday, Wednesday, Thursday and Friday.
     </li>
     <li class="itemize"><span 
class="cmtt-10x-x-109">"59 11 * * 1-5"</span>: This pattern is equivalent to the previous one.</li></ul>
<!--l. 947--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.4.6   </span> <a 
 id="x18-320004.4.6"></a><span 
class="cmtt-10x-x-109">@error </span>event</h5>
                                                                     

                                                                     
<!--l. 949--><p class="noindent" >The <span 
class="cmtt-10x-x-109">@error(message:String) </span>event occurs when an error is thrown during the
function&#8217;s evaluation.
                                                                     

                                                                     
   <!--l. 951--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu11.html" >next</a>] [<a 
href="ini_manualsu9.html" >prev</a>] [<a 
href="ini_manualsu9.html#tailini_manualsu9.html" >prev-tail</a>] [<a 
href="ini_manualsu10.html" >front</a>] [<a 
href="ini_manualse4.html#ini_manualsu10.html" >up</a>] </p></div>
<!--l. 951--><p class="indent" >   <a 
 id="tailini_manualsu10.html"></a>   
</body></html> 
