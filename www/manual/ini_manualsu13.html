<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Function references and eval</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,frames,3,info --> 
<meta name="src" content="ini_manual.tex"> 
<meta name="date" content="2010-09-12 12:23:00"> 
<link rel="stylesheet" type="text/css" href="ini_manual.css"> 
</head><body 
>
   <!--l. 1160--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu14.html" >next</a>] [<a 
href="ini_manualsu12.html" >prev</a>] [<a 
href="ini_manualsu12.html#tailini_manualsu12.html" >prev-tail</a>] [<a 
href="#tailini_manualsu13.html">tail</a>] [<a 
href="ini_manualse4.html#ini_manualsu13.html" >up</a>] </p></div>
   <h4 class="subsectionHead"><span class="titlemark">4.7   </span> <a 
 id="x21-430004.7"></a>Function references and <span 
class="cmtt-10x-x-109">eval</span></h4>
<!--l. 1162--><p class="noindent" >Functions can be referenced and passed as parameters to other functions. A
function reference expression is defined with the function keyword. For instance:
<span 
class="cmtt-10x-x-109">f = function(my</span><span 
class="cmtt-10x-x-109">_function) </span>creates a reference to <span 
class="cmtt-10x-x-109">my</span><span 
class="cmtt-10x-x-109">_function </span>and
store it in the <span 
class="cmtt-10x-x-109">f </span>variable. Then the referenced function can be evaluated
using the built-in function <span 
class="cmtt-10x-x-109">eval</span>, that takes a reference to the function to
be evaluated followed by the parameters to be passed to the evaluated
function.
<!--l. 1164--><p class="indent" >   The following program illustrates the use of function references. It defines a
<span 
class="cmtt-10x-x-109">sort </span>function at line 9 that takes a list <span 
class="cmtt-10x-x-109">l </span>to sort and a comparison function to
compare the elements of the list. This function is passes in the <span 
class="cmtt-10x-x-109">comparator</span>
parameter.
   <!--l. 1167-->
   <div class="lstlisting" id="listing-48"><span class="label"><a 
 id="x21-43001r1"></a><span 
class="cmr-9">1</span></span><span 
class="cmr-10">function</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">main</span><span 
class="cmr-10">()</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43002r2"></a><span 
class="cmr-9">2</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">@init</span><span 
class="cmr-10">()</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43003r3"></a><span 
class="cmr-9">3</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">l</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">=</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#8221;</span><span 
class="cmr-10">a</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">string</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">to</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">sort</span><span 
class="cmr-10">&#8221;</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43004r4"></a><span 
class="cmr-9">4</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">sort</span><span 
class="cmr-10">(</span><span 
class="cmr-10">l</span><span 
class="cmr-10">,</span><span 
class="cmr-10">function</span><span 
class="cmr-10">(</span><span 
class="cmr-10">compare</span><span 
class="cmr-10">))</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43005r5"></a><span 
class="cmr-9">5</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">println</span><span 
class="cmr-10">(&#8221;</span><span 
class="cmr-10">result</span><span 
class="cmr-10">:</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#8221;+</span><span 
class="cmr-10">l</span><span 
class="cmr-10">)</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43006r6"></a><span 
class="cmr-9">6</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43007r7"></a><span 
class="cmr-9">7</span></span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43008r8"></a><span 
class="cmr-9">8</span></span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43009r9"></a><span 
class="cmr-9">9</span></span><span 
class="cmr-10">function</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">sort</span><span 
class="cmr-10">(</span><span 
class="cmr-10">l</span><span 
class="cmr-10">,</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">comparator</span><span 
class="cmr-10">)</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43010r10"></a><span 
class="cmr-9">10</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">i</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">of</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">[0..</span><span 
class="cmr-10">size</span><span 
class="cmr-10">(</span><span 
class="cmr-10">l</span><span 
class="cmr-10">)</span><span 
class="cmsy-10">-</span><span 
class="cmr-10">2]</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">|</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">eval</span><span 
class="cmr-10">(</span><span 
class="cmr-10">comparator</span><span 
class="cmr-10">,</span><span 
class="cmr-10">l</span><span 
class="cmr-10">[</span><span 
class="cmr-10">i</span><span 
class="cmr-10">],</span><span 
class="cmr-10">l</span><span 
class="cmr-10">[</span><span 
class="cmr-10">i</span><span 
class="cmr-10">+1])</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">0</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43011r11"></a><span 
class="cmr-9">11</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">swap</span><span 
class="cmr-10">(</span><span 
class="cmr-10">l</span><span 
class="cmr-10">[</span><span 
class="cmr-10">i</span><span 
class="cmr-10">],</span><span 
class="cmr-10">l</span><span 
class="cmr-10">[</span><span 
class="cmr-10">i</span><span 
class="cmr-10">+1])</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43012r12"></a><span 
class="cmr-9">12</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43013r13"></a><span 
class="cmr-9">13</span></span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43014r14"></a><span 
class="cmr-9">14</span></span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43015r15"></a><span 
class="cmr-9">15</span></span><span 
class="cmr-10">function</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">compare</span><span 
class="cmr-10">(</span><span 
class="cmr-10">e1</span><span 
class="cmr-10">,</span><span 
class="cmr-10">e2</span><span 
class="cmr-10">)</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43016r16"></a><span 
class="cmr-9">16</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e1</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e2</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">return</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">1</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43017r17"></a><span 
class="cmr-9">17</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e1</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmmi-10">&#x003C;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e2</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">return</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">-</span><span 
class="cmr-10">1</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43018r18"></a><span 
class="cmr-9">18</span></span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e1</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">==</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">e2</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">{</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">return</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmr-10">0</span><span 
class="cmr-10">&#x00A0;</span><span 
class="cmsy-10">}</span><span 
class="cmr-10">&#x00A0;</span><br /><span class="label"><a 
 id="x21-43019r19"></a><span 
class="cmr-9">19</span></span><span 
class="cmsy-10">}</span>
   
   </div>
<!--l. 1189--><p class="indent" >   As one can see at line 10, that we invoke the <span 
class="cmtt-10x-x-109">eval </span>function to call the
function referenced in <span 
class="cmtt-10x-x-109">comparator</span>. This function takes two elements (here <span 
class="cmtt-10x-x-109">l[i]</span>
and <span 
class="cmtt-10x-x-109">l[i+1] </span>are passed) and returns an integer (since the result of <span 
class="cmtt-10x-x-109">eval </span>is
compared with 0). At line 4, we can see that the passed comparison function is
the <span 
class="cmtt-10x-x-109">compare </span>function defined at line 15, however, any comparison function that
takes to elements to compare and returns an integer may be used as a
comparator.
                                                                     

                                                                     
   <!--l. 1191--><div class="crosslinks"><p class="noindent">[<a 
href="ini_manualsu14.html" >next</a>] [<a 
href="ini_manualsu12.html" >prev</a>] [<a 
href="ini_manualsu12.html#tailini_manualsu12.html" >prev-tail</a>] [<a 
href="ini_manualsu13.html" >front</a>] [<a 
href="ini_manualse4.html#ini_manualsu13.html" >up</a>] </p></div>
<!--l. 1191--><p class="indent" >   <a 
 id="tailini_manualsu13.html"></a>  
</body></html> 
