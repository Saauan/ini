
process fac(n) {
  @init() {
    f = 1
  }
  // this rule will loop until n = 0
  n > 0 {
    f = f * n--
  }
  @end() {
    return f
  }
}

println(fac(5))

/*
process p(a, b) {
	a < b {
		b = b - a
	}
	b < a {
		a = a - b
	}
	@end() {
		return a
	}
}

a = 5*6*2*7*3
b = 3*5*3425
println("a={a}, b={b}")
println(p(a, b))
println(p(25, 15)) // result => 5
println(p(17, 28)) // result => 1
println(p(1260, 51375)) // result => 15
*/

/*
declare channel +c0(Int)
declare channel +c1(Int)
declare channel +c2(Int)
//declare predicate p1 "(<> end)"

process main() {
	@init() {
		p(c1, c2)	//[node="n1"]
		p(c2, c0)	//[node="n2"]
		println("processes started")
		c1.produce(1) [checkpoint="start"]
	}
	c:@consume(v) [channel=c0] {
		println("end of pipeline: {v}")
		stop(c) [checkpoint="end"]
	}
}

process p(in, out) {
	c:@consume(v) [channel=in] {
		println("{in}: {v}")
		out.produce(v+1)
		stop(c)
	}
}*/
