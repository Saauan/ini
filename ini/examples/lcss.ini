
type Point = [x:Float, y:Float]
type Point2 = T[x:Float, y:Float]

function main() {
	@init() {
		t1 = [ Point[x=0.0,y=0.0], Point[x=1.0,y=1.0], Point[x=2.0,y=2.0] ]
		t2 = [ Point[x=0.0,y=0.0], Point[x=1.0,y=3.0], Point[x=2.0,y=1.0] ]
		println(lcss(t1, t2, 3.0))
	}
}

function test(p) {
	@init() {
		dx = p.x-p.z
	}	
}

function lcss(t1, t2, e) {
	size(t1) == 0 || size(t2) == 0 {
		return 0.0
	}
	dist(first(t1),first(t2))<=e {
		return lcss(rest(t1), rest(t2), e) + 1.0
	}
	@end() {
		return max(lcss(rest(t1), t2, e), lcss(t1, rest(t2), e))
	}
}

function dist(p1,p2) {
	@init() {
		dx = p2.x-p1.x
		dy = p2.y-p1.y
		return sqrt(dx*dx+dy*dy)
	}
}
