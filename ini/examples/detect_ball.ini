import "ini/examples/unpublished/lib_io.ini"
@ballMove[Boolean, Integer](Float, Integer, Integer)=> "ini.ext.events.AtBallMove"

function main() {
	@init() {
		f = file("ball.csv")
		debug = true
		mode = true
	}
	!file_exists(f) {
		fprint(f, "Time, " + "r, " + "x, " + "y", mode)
		fprint(f,"\r\n",mode)
	}
	@ballMove[showWindows = debug,sleepTime = 1](r,x,y){
		println("Ball is detected at: " + r + "," + x + "," + y)
		fprint(f,"" + time() + ","+ r + "," + x + "," + y,mode)
		fprint(f,"\r\n",mode)
	}
	@every[time = 5000](){
		t = time()
		zip(file_name(f), "" + t + "ballData.zip")
		upload_ftp("mcube.isep.fr", "lgiang", "caybang", "" + t + "ballData.zip", "" + t + "ballData.zip")
	}	
}