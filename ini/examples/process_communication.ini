process main() {
	@init() {
		p("c1", "c2")	//[node="n1"]
		p("c2", "c")	//[node="n2"]
		println("processes started")
		produce("c1", 1)
	}
	c:@consume(v) [channel="c"] {
		println("end of pipeline: "+v)
		stop(c)
	}
}

process p(in, out) {
	c:@consume(v) [channel=in] {
		println(in+": "+v)
		produce(out, v+1)
		stop(c)
	}
}
