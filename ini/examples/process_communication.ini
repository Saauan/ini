process main() {
	@init() {
		p("c1", "c2")
		p("c2", "c")
		println("processes started")
		produce("c1", 1)
	}
	c:@consume[channel="c"](v) {
		println("end of pipeline: "+v)
		stop(c)
	}
}

process p(in, out) {
	c:@consume[channel=in](v) {
		println(in+": "+v)
		produce(out, v+1)
		stop(c)
	}
}
