agent main() {
	@init() {
		a("c1", "c2") > [n1]
		a("c2", "c") > [*]
		println("agents started")
		produce("c1", 1)
	}
	c:@consume[channel="c"](v) {
		println("end of pipeline: "+v)
		stop(c)
	}
}

agent a(in, out) {
	c:@consume[channel=in](v) {
		println(in+": "+v)
		produce(out, v+1)
		stop(c)
	}
}
